<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Flexo Sketchbook — Thu 17 Oct 2013: portraits loading</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../sketch.css">
    <link rel="stylesheet" href="portraits.css">
    <script src="../flexo-0.3.0.js"></script>
  </head>
  <body>
    <div id="loading">
      LOADING
    </div>
    <div id="error" class="hidden">
      ERROR
    </div>
    <ul id="gallery"></ul>
    <p>This <a href="http://romulusetrem.us/flexo/">Flexo</a> sample shows how
    to load and display images in parallel or in sequence using promises. The
    art is by <a href="http://jonathanlarabie.net/">Jonathan Larabie</a> and
      <a href="http://romulusetrem.us/">romulusetrem.us</a>.</p>
    <p>Images are loaded using the <code>flexo.promise_img()</code> function
    that creates a new image element and returns a promise that is fulfilled
    once the image as loaded (or gets rejected if an error occurs.) A different
    promise is created for every image.
    <span id="par">Here, the images are displayed in the order in which they
      are loaded. This is achieved with <code>flexo.collect_promises()</code>,
      which transforms a list of promises into a promise of a list, which is
      fulfilled once every promise in the list has been fulfilled, regardless of
      order. Every image is displayed as soon as its related promise is
      fulfilled, then when the whole collection is fulfilled, the “loading” sign
      can be removed. Compare with <a href="?seq=true">displaying the images in
        sequence.</a></span>
    <span id="seq">Here, the images are displayed in document order, even though
      they may load in a different order. (This is why several images may appear
      at once: the second image is not shown before the first can be shown, but
      if it was loaded before the first, it can then be shown immediately after
      the first one finished loading.) This is achieved with
      <code>flexo.fold_promises()</code> which is a catamorphism transforming a
      list of promises into a single promise. Compare with <a
        href="?seq=false">displaying the images in parallel.</a></span>
    </p>
    <script src="portraits.js"></script>
  </body>
</html>
