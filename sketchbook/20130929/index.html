<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Flexo Sketchbook — Sun 29 Sep 2013: color bars</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="http://openfontlibrary.org/face/freeuniversal">
    <link rel="stylesheet" href="../sketch.css">
    <script src="../../flexo.js"></script>
  </head>
  <body class="full">
    <svg class="full" viewBox="0 0 400 400" width="100%" height="100%">
    </svg>
    <script>
"use strict";

var bars = 40;
var svg = document.querySelector("svg");
var bbox = svg.viewBox.baseVal;
var width = bbox.width;
var height = bbox.height;

var random_hue = (function () {
  var golden_ratio_conjugate = 0.618033988749895;
  var h = Math.random();
  return function () {
    h = (h + golden_ratio_conjugate) % 1;
    return h;
  };
}());

var h = height / bars;
var hmin = Math.random() * 2 * π;
var hmax = hmin + flexo.remap(Math.random(), 0, 1, π / 6, π / 2);
var s = 0.8;
var v = 1;

function gen(n) {
  var a = new Array(n);
  for (var i = 0; i < n; ++i) {
    a[i] = i;
  }
  return a;
}

var hues = [];
flexo.shuffle_array(gen(bars)).forEach(function (n, i) {
  hues.push(random_hue());
  var hues_ = flexo.shuffle_array(hues);
  var y = n * h;
  var w = width / (i + 1);
  for (var j = 0; j <= i; ++j) {
    var color = flexo.hsv_to_hex(flexo.remap(hues_[j], 0, 1, hmin, hmax), s, v);
    svg.appendChild(flexo.$rect({ x: j * w, y: y, width: w, height: h,
      fill: color, stroke: color }));
  }
});

    </script>
  </body>
</html>
